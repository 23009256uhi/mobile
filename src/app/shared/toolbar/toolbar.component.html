<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons *ngIf="!showSearchBar" slot="start">
      <ion-menu-button
        *ngIf="!showBackButton"
        (click)="openMainMenu()"
      ></ion-menu-button>
      <ion-back-button *ngIf="showBackButton" defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title *ngIf="title">{{ title }}</ion-title>
    <ion-buttons slot="end" *ngIf="!showSearchBar">
      <ion-button (click)="toggleSearchBar()">
        <ion-icon slot="icon-only" name="search"></ion-icon>
      </ion-button>
    </ion-buttons>

    <ion-searchbar
      *ngIf="showSearchBar"
      showCancelButton="always"
      (ionCancel)="toggleSearchBar()"
      (ionChange)="onSearch(searchTerm)"
      [(ngModel)]="searchTerm"
    >
    </ion-searchbar>

    <!-- User Icon or Login Button -->
    <ion-buttons slot="end" *ngIf="!showSearchBar">
      <!-- User Icon when logged in -->
      <ion-button *ngIf="isLoggedIn" (click)="openUserMenu()">
        <ion-icon slot="icon-only" name="person-circle"></ion-icon>
      </ion-button>

      <!-- Login Button when not logged in -->
      <ion-button *ngIf="!isLoggedIn" (click)="goToLogin()">
        <ion-label>Login</ion-label>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
